<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AWS障害情報＋コメント共有</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; }
    header { background: #232f3e; color: white; text-align: center; padding: 15px; }
    main { padding: 20px; max-width: 800px; margin: auto; }
    #comments { background: #fff; padding: 15px; border-radius: 8px; margin-top: 20px; }
    .comment { border-bottom: 1px solid #ddd; padding: 10px 0; }
    .comment:last-child { border-bottom: none; }
    input, textarea { width: 100%; padding: 8px; margin-top: 8px; }
    button { margin-top: 10px; background: #0073bb; color: #fff; border: none; padding: 10px 15px; cursor: pointer; border-radius: 5px; }
    button:hover { background: #005b99; }
  </style>
</head>
<body>
  <header>
    <h1>AWS 障害情報</h1>
    <p>リアルタイムコメント機能付き</p>
  </header>

  <main>
    <h2>2025年10月20日 アメリカ サービス障害（現在：復旧済み ✅）</h2>

    <div id="comments">
      <h3>💬 コメント欄（みんな見れる）</h3>
      <div id="commentList"></div>
      <input type="text" id="username" placeholder="名前（任意）" />
      <textarea id="commentText" placeholder="コメントを入力..." rows="3"></textarea>
      <button onclick="sendComment()">送信</button>
    </div>
  </main>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-database-compat.js"></script>

  <script>
    // 🔸 Firebase設定（あなたのプロジェクトの値に置き換え）
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Firebase初期化
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const commentList = document.getElementById("commentList");

    // 🔸 コメント送信
    function sendComment() {
      const name = document.getElementById("username").value || "名無し";
      const text = document.getElementById("commentText").value;
      if (!text) return;

      const newCommentRef = db.ref("comments").push();
      newCommentRef.set({
        name: name,
        text: text,
        time: new Date().toLocaleString()
      });

      document.getElementById("commentText").value = "";
    }

    // 🔸 コメントをリアルタイム取得
    db.ref("comments").on("child_added", (snapshot) => {
      const data = snapshot.val();
      const div = document.createElement("div");
      div.className = "comment";
      div.innerHTML = `<strong>${data.name}</strong> <small>${data.time}</small><br>${data.text}`;
      commentList.appendChild(div);
    });
  </script>
</body>
</html>
