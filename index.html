<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>名鉄 LED 行先シミュレーター</title>
  <style>
    body {
      background: #000;
      font-family: monospace;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #fff;
    }

    #led {
      background: #111;
      color: #fff;
      font-size: 2.5rem;
      padding: 20px;
      width: 800px;
      height: 100px;
      overflow: hidden;
      white-space: nowrap;
      border: 4px solid #333;
      border-radius: 10px;
      box-shadow: 0 0 15px #0f0;
      position: relative;
      margin-bottom: 20px;
    }

    #scrollText {
      display: inline-block;
      position: absolute;
      animation: scroll-left 15s linear infinite;
    }

    @keyframes scroll-left {
      0%   { left: 100%; }
      100% { left: -100%; }
    }

    .btn {
      margin: 10px;
      padding: 10px 20px;
      font-size: 1.2rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: #c00;
      color: #fff;
    }
  </style>
</head>
<body>

  <div id="led">
    <div id="scrollText">準備中...</div>
  </div>

  <button class="btn" onclick="generateTrain()">列車を生成</button>

  <script>
    // 駅リスト（例：本線の一部、追加すれば全駅対応可）
    const stations = [
      "豊橋","伊奈","小田渕","国府","御油","名電赤坂","名電長沢","本宿","名電山中","藤川",
      "美合","男川","東岡崎","岡崎公園前","矢作橋","宇頭","新安城","牛田","知立",
      "一ツ木","富士松","豊明","前後","中京競馬場前","有松","左京山","鳴海","本星崎","本笠寺",
      "桜","呼続","堀田","神宮前","金山","山王","名鉄名古屋","栄生","東枇杷島","西枇杷島",
      "二ツ杁","新川橋","須ヶ口","丸ノ内","新清洲","大里","奥田","国府宮","島氏永","妙興寺",
      "名鉄一宮","石刀","今伊勢","西一宮","開明","奥町","玉ノ井",
      "名鉄岐阜"
    ];

    const types = ["普通", "準急", "急行", "特急"];

    function generateTrain() {
      // 始発と行先をランダムに
      const origin = stations[Math.floor(Math.random() * stations.length)];
      let dest;
      do {
        dest = stations[Math.floor(Math.random() * stations.length)];
      } while (dest === origin);

      const type = types[Math.floor(Math.random() * types.length)];

      // アナウンス文
      const announce = `この電車は、${origin}始発、${type} ${dest}行きです。`;

      // LED表示をスクロール
      const scroll = document.getElementById("scrollText");
      scroll.textContent = `${type} ${dest}行き　${announce}`;
      scroll.style.animation = "none";
      void scroll.offsetWidth; // リセット
      scroll.style.animation = null;

      // Google翻訳TTSで読み上げ
      playAnnouncement(announce);
    }

    function playAnnouncement(text) {
      const url = "https://translate.google.com/translate_tts?ie=UTF-8&tl=ja&client=tw-ob&q=" 
        + encodeURIComponent(text);
      const audio = new Audio(url);
      audio.play();
    }
  </script>

</body>
</html>
